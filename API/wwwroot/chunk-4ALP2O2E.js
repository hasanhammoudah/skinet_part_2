import{a as j,b as A,c as h,d as I}from"./chunk-6QVHTEAU.js";import{a as T,d as k}from"./chunk-FL5LPLQ3.js";import{ja as F,k as R,n as S}from"./chunk-FP3WKUEP.js";import{$a as C,Cb as _,Fb as u,Gb as x,Hb as e,Ib as t,Jb as w,Qb as B,Tb as M,Tc as y,Ub as P,Uc as g,ac as i,bc as a,cb as n,cc as p,ic as f,ja as c,mc as m,na as s,nc as l,oc as v,tb as D}from"./chunk-F7J6KFMZ.js";var N=(o,d)=>d.id;function U(o,d){if(o&1&&(e(0,"tr",10)(1,"th",11),i(2),t(),e(3,"td"),i(4),m(5,"date"),t(),e(6,"td"),i(7),m(8,"currency"),t(),e(9,"td"),i(10),t()()),o&2){let r=d.$implicit;P("routerLink","/orders/",r.id,""),n(2),p("# ",r.id,""),n(2),a(v(5,6,r.orderDate,"medium")),n(3),a(l(8,9,r.total)),n(3),a(r.status)}}var b=class o{orderService=c(h);orders=[];ngOnInit(){this.orderService.getOrdersForUser().subscribe({next:d=>this.orders=d})}static \u0275fac=function(r){return new(r||o)};static \u0275cmp=s({type:o,selectors:[["app-order"]],standalone:!0,features:[f],decls:18,vars:0,consts:[[1,"mx-auto","mt-32"],[1,"font-semibold","text-2xl","mb-6","text-center"],[1,"flex","flex-col"],[1,"w-full"],[1,"min-w-full","-divide-y","divide-gray-200","cursor-pointer"],[1,"bg-gray-50"],[1,"uppercase","text-gray-600","text-sm"],[1,"text-center","px-6","py-3"],[1,"text-left"],[1,"bg-white","divide-y","divide-gray-200"],[1,"hover:bg-gray-100",3,"routerLink"],[1,"px-6","py-3"]],template:function(r,E){r&1&&(e(0,"div",0)(1,"h2",1)(2,"div",2)(3,"div",3)(4,"table",4)(5,"thead",5)(6,"tr",6)(7,"th",7),i(8,"Order"),t(),e(9,"th",8),i(10,"Date"),t(),e(11,"th",8),i(12,"Total"),t(),e(13,"th",8),i(14,"Status"),t()()(),e(15,"tbody",9),u(16,U,11,11,"tr",10,N),t()()()()()()),r&2&&(n(16),x(E.orders))},dependencies:[S,y,g]})};var G=(o,d)=>d.itemOrdered.productId;function q(o,d){if(o&1&&(e(0,"tr")(1,"td",22)(2,"div",23),w(3,"img",24),e(4,"span"),i(5),t()()(),e(6,"td",25),i(7),t(),e(8,"td",26),i(9),m(10,"currency"),t()()),o&2){let r=d.$implicit;n(3),M("src",r.itemOrdered.pictureUrl,C),n(2),a(r.itemOrdered.productName),n(2),p("x",r.quantity,""),n(2),a(l(10,4,r.price))}}function z(o,d){if(o&1&&(e(0,"mat-card",0)(1,"div",1)(2,"div",2)(3,"h2",3),i(4),t(),e(5,"button",4),i(6,"Return to orders"),t()(),e(7,"div",5)(8,"div",6)(9,"h4",7),i(10,"Billing and delivery information"),t(),e(11,"dl")(12,"dt",8),i(13,"Shipping address"),t(),e(14,"dd",9),i(15),m(16,"address"),t()(),e(17,"dl")(18,"dt",8),i(19,"Payment info"),t(),e(20,"dd",9),i(21),m(22,"card"),t()()(),e(23,"div",6)(24,"h4",7),i(25,"Order details"),t(),e(26,"dl")(27,"dt",8),i(28,"Email address"),t(),e(29,"dd",9),i(30),t()(),e(31,"dl")(32,"dt",8),i(33,"Order status"),t(),e(34,"dd",9),i(35),t()(),e(36,"dl")(37,"dt",8),i(38,"Order date"),t(),e(39,"dd",9),i(40),m(41,"date"),t()()()(),e(42,"div",10)(43,"div",11)(44,"table",12)(45,"tbody",13),u(46,q,11,6,"tr",null,G),t()()()(),e(48,"div",14)(49,"p",15),i(50,"Order summary"),t(),e(51,"div",16)(52,"div",6)(53,"dl",17)(54,"dt",18),i(55,"Subtotal"),t(),e(56,"dd",19),i(57),m(58,"currency"),t()(),e(59,"dl",17)(60,"dt",18),i(61,"Discount"),t(),e(62,"dd",20),i(63),m(64,"currency"),t()(),e(65,"dl",17)(66,"dt",18),i(67,"Delivery fee"),t(),e(68,"dd",19),i(69),m(70,"currency"),t()()(),e(71,"dl",21)(72,"dt",18),i(73,"Total"),t(),e(74,"dd",19),i(75),m(76,"currency"),t()()()()()()),o&2){let r=B();n(4),p("Order summary for order #",r.order.id,""),n(11),a(l(16,10,r.order.shippingAddress)),n(6),a(l(22,12,r.order.paymentSummary)),n(9),a(r.order.buyerEmail),n(5),a(r.order.status),n(5),a(v(41,14,r.order.orderDate,"medium")),n(6),x(r.order.orderItems),n(11),p(" ",l(58,17,r.order.subtotal)," "),n(6),p(" ",l(64,19,r.order.discount)," "),n(6),p(" ",l(70,21,r.shippingPrice)," "),n(6),p(" ",l(76,23,r.total)," ")}}var O=class o{orderService=c(h);activatedRoute=c(R);order;ngOnInit(){this.loadOrder()}loadOrder(){let d=this.activatedRoute.snapshot.paramMap.get("id");d&&this.orderService.getOrderDetailed(+d).subscribe({next:r=>this.order=r})}get shippingPrice(){return this.order?.deliveryMethod?.price??0}get discount(){if(!this.order?.coupon)return 0;let d=this.order.subtotal;return this.order.coupon.amountOff?this.order.coupon.amountOff:this.order.coupon.percentOff?d*(this.order.coupon.percentOff/100):0}get total(){return(this.order?.subtotal??0)+this.shippingPrice-(this.order?.discount??0)}static \u0275fac=function(r){return new(r||o)};static \u0275cmp=s({type:o,selectors:[["app-order-detailed"]],standalone:!0,features:[f],decls:1,vars:1,consts:[[1,"bg-white","py-8","shadow-md","max-w-screen-lg","mx-auto"],[1,"px-4","w-full"],[1,"flex","justify-between","items-center","align-middle"],[1,"text-2xl","text-center","font-semibold"],["routerLink","/orders","mat-stroked-button",""],[1,"mt-8","py-3","border-t","border-gray-200","flex","gap-16"],[1,"space-y-2"],[1,"text-lg","font-semibold"],[1,"font-medium"],[1,"mt-1","font-light"],[1,"mt-4"],[1,"border-y","border-gray-200"],[1,"w-full","text-center"],[1,"divide-y","divide-gray-200"],[1,"space-y-4","rounded-lg","border-y","border-gray-200","p-4","bg-white"],[1,"text-xl","font-semibold"],[1,"space-y-4"],[1,"flex","items-center","justify-between","gap-4"],[1,"font-medium","text-gray-500"],[1,"font-medium","text-gray-900"],[1,"font-medium","text-green-500"],[1,"flex","items-center","justify-between","gap-4","border-t","border-gray-200","pt-2"],[1,"py-4"],[1,"flex","items-center","gap-4"],["alt","product image",1,"w-10","h-10",3,"src"],[1,"p-4"],[1,"p-4","text-right"]],template:function(r,E){r&1&&D(0,z,77,25,"mat-card",0),r&2&&_(E.order?0:-1)},dependencies:[k,T,F,y,g,j,A,S]})};var ue=[{path:"",component:b,canActivate:[I]},{path:":id",component:O,canActivate:[I]}];export{ue as orderRoutes};
