import{A as Ut,B as jt,I as Dt,K as kt,O as Vt,Q as zt,s as Pt,x as Nt,y as Lt,z as Ot}from"./chunk-URLX4URI.js";import{W as tt,b as F,g as Tt,h as M,j as At,ja as Mt,n as Rt}from"./chunk-FP3WKUEP.js";import{Ab as gt,Ba as dt,Bc as Q,Cb as vt,D as it,Ga as D,Hb as c,I as ot,Ib as l,Ja as mt,Jc as Z,Lb as K,M as st,Ob as X,Oc as bt,Q as at,Qb as St,Rb as _t,Rc as Ft,Sb as It,Uc as xt,V as ct,_a as E,aa as y,ac as u,cb as g,cc as b,da as C,db as w,e as m,ea as lt,ec as yt,f as nt,fc as Ct,ga as G,gc as Et,ia as T,ic as V,ja as p,mc as A,na as O,nb as Y,nc as R,oa as ut,qb as pt,r as I,s as rt,tb as J,w as f,wa as U,wb as ft,x as h,xa as j,xb as k,zb as ht,zc as wt}from"./chunk-F7J6KFMZ.js";var Wt="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";var Ht=(o=21)=>{let r="",t=crypto.getRandomValues(new Uint8Array(o|=0));for(;o--;)r+=Wt[t[o]&63];return r};var z=class{id=Ht();items=[];deliveryMethodId;paymentIntentId;clientSecret;coupon};var x=class o{baseUrl=M.apiUrl;http=p(F);cart=Y(null);selectedDelivery=Y(null);itemCount=Q(()=>this.cart()?.items.reduce((r,t)=>r+t.quantity,0));totals=Q(()=>{let r=this.cart(),t=this.selectedDelivery();if(!r)return{shipping:0,subtotal:0,discount:0,total:0};let e=0;if(!r)return null;let n=r.items.reduce((a,d)=>a+d.price*d.quantity,0);r.coupon&&(r.coupon.amountOff?e=r.coupon.amountOff:r.coupon.percentOff&&(e=n*(r.coupon.percentOff/100)));let i=t?t.price:0,s=0;return{shipping:i,subtotal:n,discount:e,total:n+i-e}});getCart(r){return this.http.get(this.baseUrl+"cart?id="+r).pipe(h(t=>(this.cart.set(t),t)))}setCart(r){return this.http.post(this.baseUrl+"cart",r).pipe(y(t=>{this.cart.set(t)}))}applyDiscount(r){return this.http.get(this.baseUrl+"coupons/"+r)}addItemToCart(r,t=1){return m(this,null,function*(){let e=this.cart()??this.createCart();this.isProduct(r)&&(r=this.mapProductToCartItem(r)),e.items=this.addOrUpdateItem(e.items,r,t),yield f(this.setCart(e))})}removeItemFromCart(r,t=1){return m(this,null,function*(){let e=this.cart();if(!e)return;let n=e.items.findIndex(i=>i.productId===r);n!==-1&&(e.items[n].quantity>t?e.items[n].quantity-=t:e.items.splice(n,1),e.items.length===0?this.deleteCart():yield f(this.setCart(e)))})}deleteCart(){this.http.delete(this.baseUrl+"cart?id="+this.cart()?.id).subscribe({next:()=>{localStorage.removeItem("cart_id"),this.cart.set(null)}})}addOrUpdateItem(r,t,e){let n=r.findIndex(i=>i.productId===t.productId);return n===-1?(t.quantity=e,r.push(t)):r[n].quantity+=e,r}mapProductToCartItem(r){return{productId:r.id,productName:r.name,price:r.price,quantity:0,pictureUrl:r.pictureUrl,brand:r.brand,type:r.type}}isProduct(r){return r.id!==void 0}createCart(){let r=new z;return localStorage.setItem("cart_id",r.id),r}static \u0275fac=function(t){return new(t||o)};static \u0275prov=C({token:o,factory:o.\u0275fac,providedIn:"root"})};var re="v3",ie=function(r){return r===3?"v3":r},$t="https://js.stripe.com",oe="".concat($t,"/v3"),se=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,ae=/^https:\/\/js\.stripe\.com\/(v3|[a-z]+)\/stripe\.js(\?.*)?$/,Bt="loadStripe.setLoadParameters was called but an existing Stripe.js script already exists in the document; existing script parameters will be used",ce=function(r){return se.test(r)||ae.test(r)},le=function(){for(var r=document.querySelectorAll('script[src^="'.concat($t,'"]')),t=0;t<r.length;t++){var e=r[t];if(ce(e.src))return e}return null},qt=function(r){var t=r&&!r.advancedFraudSignals?"?advancedFraudSignals=false":"",e=document.createElement("script");e.src="".concat(oe).concat(t);var n=document.head||document.body;if(!n)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return n.appendChild(e),e},ue=function(r,t){!r||!r._registerWrapper||r._registerWrapper({name:"stripe-js",version:"5.10.0",startTime:t})},P=null,W=null,H=null,de=function(r){return function(t){r(new Error("Failed to load Stripe.js",{cause:t}))}},me=function(r,t){return function(){window.Stripe?r(window.Stripe):t(new Error("Stripe.js not available"))}},pe=function(r){return P!==null?P:(P=new Promise(function(t,e){if(typeof window>"u"||typeof document>"u"){t(null);return}if(window.Stripe&&r&&console.warn(Bt),window.Stripe){t(window.Stripe);return}try{var n=le();if(n&&r)console.warn(Bt);else if(!n)n=qt(r);else if(n&&H!==null&&W!==null){var i;n.removeEventListener("load",H),n.removeEventListener("error",W),(i=n.parentNode)===null||i===void 0||i.removeChild(n),n=qt(r)}H=me(t,e),W=de(e),n.addEventListener("load",H),n.addEventListener("error",W)}catch(s){e(s);return}}),P.catch(function(t){return P=null,Promise.reject(t)}))},fe=function(r,t,e){if(r===null)return null;var n=t[0],i=n.match(/^pk_test/),s=ie(r.version),a=re;i&&s!==a&&console.warn("Stripe.js@".concat(s," was loaded on the page, but @stripe/stripe-js@").concat("5.10.0"," expected Stripe.js@").concat(a,". This may result in unexpected behavior. For more information, see https://docs.stripe.com/sdks/stripejs-versioning"));var d=r.apply(void 0,t);return ue(d,e),d},N,Gt=!1,Yt=function(){return N||(N=pe(null).catch(function(r){return N=null,Promise.reject(r)}),N)};Promise.resolve().then(function(){return Yt()}).catch(function(o){Gt||console.warn(o)});var Jt=function(){for(var r=arguments.length,t=new Array(r),e=0;e<r;e++)t[e]=arguments[e];Gt=!0;var n=Date.now();return Yt().then(function(i){return fe(i,t,n)})};var B=class o{baseUrl=M.apiUrl;cartService=p(x);accountService=p(At);http=p(F);stripePromise;elements;addressElement;paymentElement;constructor(){this.stripePromise=Jt(M.stripePublicKey)}getStripeInstance(){return this.stripePromise}initializeElements(){return m(this,null,function*(){if(!this.elements){let r=yield this.getStripeInstance();if(r){let t=yield f(this.createOrUpdatePaymentIntent());this.elements=r.elements({clientSecret:t.clientSecret,appearance:{labels:"floating"}})}else throw new Error("Stripe has not been loaded")}return this.elements})}createPaymentElement(){return m(this,null,function*(){if(!this.paymentElement){let r=yield this.initializeElements();if(r)this.paymentElement=r.create("payment");else throw new Error("Elements instance has not been initialized")}return this.paymentElement})}createAddressElement(){return m(this,null,function*(){if(!this.addressElement){let r=yield this.initializeElements();if(r){let t=this.accountService.currentUser(),e={};t&&(e.name=t.firstName+" "+t.lastName),t?.address&&(e.address={line1:t.address.line1,line2:t.address.line2,city:t.address.city,state:t.address.state,country:t.address.country,postal_code:t.address.postal_code});let n={mode:"shipping",defaultValues:e};this.addressElement=r.create("address",n)}else throw new Error("Elements instance has not been loaded")}return this.addressElement})}createConfirmationToken(){return m(this,null,function*(){let r=yield this.getStripeInstance(),t=yield this.initializeElements(),e=yield t.submit();if(e.error)throw new Error(e.error.message);if(r)return yield r.createConfirmationToken({elements:t});throw new Error("Stripe not available")})}confirmPayment(r){return m(this,null,function*(){let t=yield this.getStripeInstance(),n=yield(yield this.initializeElements()).submit();if(n.error)throw new Error(n.error.message);let i=this.cartService.cart()?.clientSecret;if(t&&i)return yield t.confirmPayment({clientSecret:i,confirmParams:{confirmation_token:r.id},redirect:"if_required"});throw new Error("Unable to load stripe")})}createOrUpdatePaymentIntent(){let r=this.cartService.cart(),t=!!r?.clientSecret;if(!r)throw new Error("Problem with cart");return this.http.post(this.baseUrl+"payments/"+r.id,{}).pipe(h(e=>m(this,null,function*(){return t||(yield f(this.cartService.setCart(e))),e})))}disposeElements(){this.elements=void 0,this.addressElement=void 0,this.paymentElement=void 0}static \u0275fac=function(t){return new(t||o)};static \u0275prov=C({token:o,factory:o.\u0275fac,providedIn:"root"})};var he=["*"],q;function ge(){if(q===void 0&&(q=null,typeof window<"u")){let o=window;o.trustedTypes!==void 0&&(q=o.trustedTypes.createPolicy("angular#components",{createHTML:r=>r}))}return q}function L(o){return ge()?.createHTML(o)||o}function Kt(o){return Error(`Unable to find icon with the name "${o}"`)}function ve(){return Error("Could not find HttpClient for use with Angular Material icons. Please add provideHttpClient() to your providers.")}function Xt(o){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${o}".`)}function Qt(o){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${o}".`)}var S=class{constructor(r,t,e){this.url=r,this.svgText=t,this.options=e}},Se=(()=>{class o{constructor(t,e,n,i){this._httpClient=t,this._sanitizer=e,this._errorHandler=i,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass=["material-icons","mat-ligature-font"],this._document=n}addSvgIcon(t,e,n){return this.addSvgIconInNamespace("",t,e,n)}addSvgIconLiteral(t,e,n){return this.addSvgIconLiteralInNamespace("",t,e,n)}addSvgIconInNamespace(t,e,n,i){return this._addSvgIconConfig(t,e,new S(n,null,i))}addSvgIconResolver(t){return this._resolvers.push(t),this}addSvgIconLiteralInNamespace(t,e,n,i){let s=this._sanitizer.sanitize(E.HTML,n);if(!s)throw Qt(n);let a=L(s);return this._addSvgIconConfig(t,e,new S("",a,i))}addSvgIconSet(t,e){return this.addSvgIconSetInNamespace("",t,e)}addSvgIconSetLiteral(t,e){return this.addSvgIconSetLiteralInNamespace("",t,e)}addSvgIconSetInNamespace(t,e,n){return this._addSvgIconSetConfig(t,new S(e,null,n))}addSvgIconSetLiteralInNamespace(t,e,n){let i=this._sanitizer.sanitize(E.HTML,e);if(!i)throw Qt(e);let s=L(i);return this._addSvgIconSetConfig(t,new S("",s,n))}registerFontClassAlias(t,e=t){return this._fontCssClassesByAlias.set(t,e),this}classNameForFontAlias(t){return this._fontCssClassesByAlias.get(t)||t}setDefaultFontSetClass(...t){return this._defaultFontSetClass=t,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(t){let e=this._sanitizer.sanitize(E.RESOURCE_URL,t);if(!e)throw Xt(t);let n=this._cachedIconsByUrl.get(e);return n?I($(n)):this._loadSvgIconFromConfig(new S(t,null)).pipe(y(i=>this._cachedIconsByUrl.set(e,i)),h(i=>$(i)))}getNamedSvgIcon(t,e=""){let n=Zt(e,t),i=this._svgIconConfigs.get(n);if(i)return this._getSvgFromConfig(i);if(i=this._getIconConfigFromResolvers(e,t),i)return this._svgIconConfigs.set(n,i),this._getSvgFromConfig(i);let s=this._iconSetConfigs.get(e);return s?this._getSvgFromIconSetConfigs(t,s):rt(Kt(n))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(t){return t.svgText?I($(this._svgElementFromConfig(t))):this._loadSvgIconFromConfig(t).pipe(h(e=>$(e)))}_getSvgFromIconSetConfigs(t,e){let n=this._extractIconWithNameFromAnySet(t,e);if(n)return I(n);let i=e.filter(s=>!s.svgText).map(s=>this._loadSvgIconSetFromConfig(s).pipe(ot(a=>{let v=`Loading icon set URL: ${this._sanitizer.sanitize(E.RESOURCE_URL,s.url)} failed: ${a.message}`;return this._errorHandler.handleError(new Error(v)),I(null)})));return it(i).pipe(h(()=>{let s=this._extractIconWithNameFromAnySet(t,e);if(!s)throw Kt(t);return s}))}_extractIconWithNameFromAnySet(t,e){for(let n=e.length-1;n>=0;n--){let i=e[n];if(i.svgText&&i.svgText.toString().indexOf(t)>-1){let s=this._svgElementFromConfig(i),a=this._extractSvgIconFromSet(s,t,i.options);if(a)return a}}return null}_loadSvgIconFromConfig(t){return this._fetchIcon(t).pipe(y(e=>t.svgText=e),h(()=>this._svgElementFromConfig(t)))}_loadSvgIconSetFromConfig(t){return t.svgText?I(null):this._fetchIcon(t).pipe(y(e=>t.svgText=e))}_extractSvgIconFromSet(t,e,n){let i=t.querySelector(`[id="${e}"]`);if(!i)return null;let s=i.cloneNode(!0);if(s.removeAttribute("id"),s.nodeName.toLowerCase()==="svg")return this._setSvgAttributes(s,n);if(s.nodeName.toLowerCase()==="symbol")return this._setSvgAttributes(this._toSvgElement(s),n);let a=this._svgElementFromString(L("<svg></svg>"));return a.appendChild(s),this._setSvgAttributes(a,n)}_svgElementFromString(t){let e=this._document.createElement("DIV");e.innerHTML=t;let n=e.querySelector("svg");if(!n)throw Error("<svg> tag not found");return n}_toSvgElement(t){let e=this._svgElementFromString(L("<svg></svg>")),n=t.attributes;for(let i=0;i<n.length;i++){let{name:s,value:a}=n[i];s!=="id"&&e.setAttribute(s,a)}for(let i=0;i<t.childNodes.length;i++)t.childNodes[i].nodeType===this._document.ELEMENT_NODE&&e.appendChild(t.childNodes[i].cloneNode(!0));return e}_setSvgAttributes(t,e){return t.setAttribute("fit",""),t.setAttribute("height","100%"),t.setAttribute("width","100%"),t.setAttribute("preserveAspectRatio","xMidYMid meet"),t.setAttribute("focusable","false"),e&&e.viewBox&&t.setAttribute("viewBox",e.viewBox),t}_fetchIcon(t){let{url:e,options:n}=t,i=n?.withCredentials??!1;if(!this._httpClient)throw ve();if(e==null)throw Error(`Cannot fetch icon from URL "${e}".`);let s=this._sanitizer.sanitize(E.RESOURCE_URL,e);if(!s)throw Xt(e);let a=this._inProgressUrlFetches.get(s);if(a)return a;let d=this._httpClient.get(s,{responseType:"text",withCredentials:i}).pipe(h(v=>L(v)),at(()=>this._inProgressUrlFetches.delete(s)),ct());return this._inProgressUrlFetches.set(s,d),d}_addSvgIconConfig(t,e,n){return this._svgIconConfigs.set(Zt(t,e),n),this}_addSvgIconSetConfig(t,e){let n=this._iconSetConfigs.get(t);return n?n.push(e):this._iconSetConfigs.set(t,[e]),this}_svgElementFromConfig(t){if(!t.svgElement){let e=this._svgElementFromString(t.svgText);this._setSvgAttributes(e,t.options),t.svgElement=e}return t.svgElement}_getIconConfigFromResolvers(t,e){for(let n=0;n<this._resolvers.length;n++){let i=this._resolvers[n](e,t);if(i)return _e(i)?new S(i.url,null,i.options):new S(i,null)}}static{this.\u0275fac=function(e){return new(e||o)(T(F,8),T(Tt),T(Z,8),T(D))}}static{this.\u0275prov=C({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})();function $(o){return o.cloneNode(!0)}function Zt(o,r){return o+":"+r}function _e(o){return!!(o.url&&o.options)}var Ie=new G("MAT_ICON_DEFAULT_OPTIONS"),ye=new G("mat-icon-location",{providedIn:"root",factory:Ce});function Ce(){let o=p(Z),r=o?o.location:null;return{getPathname:()=>r?r.pathname+r.search:""}}var te=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],Ee=te.map(o=>`[${o}]`).join(", "),we=/^url\(['"]?#(.*?)['"]?\)$/,ee=(()=>{class o{get color(){return this._color||this._defaultColor}set color(t){this._color=t}get svgIcon(){return this._svgIcon}set svgIcon(t){t!==this._svgIcon&&(t?this._updateSvgIcon(t):this._svgIcon&&this._clearSvgElement(),this._svgIcon=t)}get fontSet(){return this._fontSet}set fontSet(t){let e=this._cleanupFontValue(t);e!==this._fontSet&&(this._fontSet=e,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(t){let e=this._cleanupFontValue(t);e!==this._fontIcon&&(this._fontIcon=e,this._updateFontIconClasses())}constructor(t,e,n,i,s,a){this._elementRef=t,this._iconRegistry=e,this._location=i,this._errorHandler=s,this.inline=!1,this._previousFontSetClass=[],this._currentIconFetch=nt.EMPTY,a&&(a.color&&(this.color=this._defaultColor=a.color),a.fontSet&&(this.fontSet=a.fontSet)),n||t.nativeElement.setAttribute("aria-hidden","true")}_splitIconName(t){if(!t)return["",""];let e=t.split(":");switch(e.length){case 1:return["",e[0]];case 2:return e;default:throw Error(`Invalid icon name: "${t}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){let t=this._elementsWithExternalReferences;if(t&&t.size){let e=this._location.getPathname();e!==this._previousPath&&(this._previousPath=e,this._prependPathToReferences(e))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(t){this._clearSvgElement();let e=this._location.getPathname();this._previousPath=e,this._cacheChildrenWithExternalReferences(t),this._prependPathToReferences(e),this._elementRef.nativeElement.appendChild(t)}_clearSvgElement(){let t=this._elementRef.nativeElement,e=t.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();e--;){let n=t.childNodes[e];(n.nodeType!==1||n.nodeName.toLowerCase()==="svg")&&n.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;let t=this._elementRef.nativeElement,e=(this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet).split(/ +/):this._iconRegistry.getDefaultFontSetClass()).filter(n=>n.length>0);this._previousFontSetClass.forEach(n=>t.classList.remove(n)),e.forEach(n=>t.classList.add(n)),this._previousFontSetClass=e,this.fontIcon!==this._previousFontIconClass&&!e.includes("mat-ligature-font")&&(this._previousFontIconClass&&t.classList.remove(this._previousFontIconClass),this.fontIcon&&t.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(t){return typeof t=="string"?t.trim().split(" ")[0]:t}_prependPathToReferences(t){let e=this._elementsWithExternalReferences;e&&e.forEach((n,i)=>{n.forEach(s=>{i.setAttribute(s.name,`url('${t}#${s.value}')`)})})}_cacheChildrenWithExternalReferences(t){let e=t.querySelectorAll(Ee),n=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let i=0;i<e.length;i++)te.forEach(s=>{let a=e[i],d=a.getAttribute(s),v=d?d.match(we):null;if(v){let _=n.get(a);_||(_=[],n.set(a,_)),_.push({name:s,value:v[1]})}})}_updateSvgIcon(t){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),t){let[e,n]=this._splitIconName(t);e&&(this._svgNamespace=e),n&&(this._svgName=n),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(n,e).pipe(st(1)).subscribe(i=>this._setSvgElement(i),i=>{let s=`Error retrieving icon ${e}:${n}! ${i.message}`;this._errorHandler.handleError(new Error(s))})}}static{this.\u0275fac=function(e){return new(e||o)(w(mt),w(Se),dt("aria-hidden"),w(ye),w(D),w(Ie,8))}}static{this.\u0275cmp=O({type:o,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:10,hostBindings:function(e,n){e&2&&(ft("data-mat-icon-type",n._usingFontIcon()?"font":"svg")("data-mat-icon-name",n._svgName||n.fontIcon)("data-mat-icon-namespace",n._svgNamespace||n.fontSet)("fontIcon",n._usingFontIcon()?n.fontIcon:null),gt(n.color?"mat-"+n.color:""),ht("mat-icon-inline",n.inline)("mat-icon-no-color",n.color!=="primary"&&n.color!=="accent"&&n.color!=="warn"))},inputs:{color:"color",inline:[2,"inline","inline",wt],svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],standalone:!0,features:[pt,V],ngContentSelectors:he,decls:1,vars:0,template:function(e,n){e&1&&(_t(),It(0))},styles:["mat-icon,mat-icon.mat-primary,mat-icon.mat-accent,mat-icon.mat-warn{color:var(--mat-icon-color)}.mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px;overflow:hidden}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}.mat-icon.mat-ligature-font[fontIcon]::before{content:attr(fontIcon)}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}"],encapsulation:2,changeDetection:0})}}return o})(),bn=(()=>{class o{static{this.\u0275fac=function(e){return new(e||o)}}static{this.\u0275mod=ut({type:o})}static{this.\u0275inj=lt({imports:[tt,tt]})}}return o})();function be(o,r){o&1&&(c(0,"div",11)(1,"button",19),u(2,"Checkout"),l(),c(3,"button",20),u(4,"Continue Shopping"),l()())}function Fe(o,r){if(o&1){let t=K();c(0,"div",21)(1,"span",22),u(2),l(),c(3,"button",23),X("click",function(){U(t);let n=St();return j(n.removeCouponCode())}),c(4,"mat-icon",24),u(5,"delete"),l()()()}if(o&2){let t=r.ngIf;g(2),b("",t.name," applied")}}var ne=class o{cartService=p(x);stripeService=p(B);location=p(bt);code;applyCouponCode(){this.code&&this.cartService.applyDiscount(this.code).subscribe({next:r=>m(this,null,function*(){let t=this.cartService.cart();t&&(t.coupon=r,yield f(this.cartService.setCart(t)),this.code=void 0,this.location.path()==="/checkout"&&(yield f(this.stripeService.createOrUpdatePaymentIntent())))})})}removeCouponCode(){return m(this,null,function*(){let r=this.cartService.cart();r&&(r.coupon&&(r.coupon=void 0),yield f(this.cartService.setCart(r)),this.location.path()==="/checkout"&&(yield f(this.stripeService.createOrUpdatePaymentIntent())))})}static \u0275fac=function(t){return new(t||o)};static \u0275cmp=O({type:o,selectors:[["app-order-summary"]],standalone:!0,features:[V],decls:43,vars:17,consts:[["form","ngForm"],[1,"mx-auto","max-w-4xl","flex-1","space-y-6","w-full"],[1,"space-y-4","rounded-lg","border","border-gray-200","p-4","bg-white","shadow-sm"],[1,"text-xl","font-semibold"],[1,"space-y-4"],[1,"space-y-2"],[1,"flex","items-center","justify-between","gap-4"],[1,"font-medium","text-gray-500"],[1,"font-medium","text-gray-900"],[1,"font-medium","text-green-500"],[1,"flex","items-center","justify-between","gap-4","border-t","border-gray-200","pt-2"],[1,"flex","flex-col","gap-2"],[1,"space-y-4","rounded-lg","border","border-gray-200","bg-white","shadow-sm"],[1,"space-y-2","flex","flex-col","p-2",3,"ngSubmit"],[1,"mb-2","block","text-sm","font-mediem"],["class","flex justify-between items-center",4,"ngIf"],["appearance","outline"],["name","code","type","text","matInput","",3,"ngModelChange","disabled","ngModel"],["type","submit","mat-flat-button","",3,"disabled"],["routerLink","/checkout","mat-flat-button",""],["routerLink","/shop","mat-button",""],[1,"flex","justify-between","items-center"],[1,"text-sm","font-semibold"],["mat-icon-button","",3,"click"],["color","warn"]],template:function(t,e){if(t&1){let n=K();c(0,"div",1)(1,"div",2)(2,"p",3),u(3,"Order summary"),l(),c(4,"div",4)(5,"div",5)(6,"dl",6)(7,"dt",7),u(8,"Subtotal"),l(),c(9,"dd",8),u(10),A(11,"currency"),l()(),c(12,"dl",6)(13,"dt",7),u(14,"Discount"),l(),c(15,"dd",9),u(16),A(17,"currency"),l()(),c(18,"dl",6)(19,"dt",7),u(20,"Delivery fee"),l(),c(21,"dd",8),u(22),A(23,"currency"),l()()(),c(24,"dl",10)(25,"dt",7),u(26,"Total"),l(),c(27,"dd",8),u(28),A(29,"currency"),l()()(),J(30,be,5,0,"div",11),l(),c(31,"div",12)(32,"form",13,0),X("ngSubmit",function(){return U(n),j(e.applyCouponCode())}),c(34,"label",14),u(35," Do you have a voucher code? "),l(),J(36,Fe,6,1,"div",15),c(37,"mat-form-field",16)(38,"mat-label"),u(39,"Voucher code"),l(),c(40,"input",17),Et("ngModelChange",function(s){return U(n),Ct(e.code,s)||(e.code=s),j(s)}),l()(),c(41,"button",18),u(42,"Apply code"),l()()()()}if(t&2){let n,i,s,a,d,v,_;g(10),b(" ",R(11,9,(n=e.cartService.totals())==null?null:n.subtotal)," "),g(6),b(" -",R(17,11,(i=e.cartService.totals())==null?null:i.discount)," "),g(6),b(" ",R(23,13,(s=e.cartService.totals())==null?null:s.shipping)," "),g(6),b(" ",R(29,15,(a=e.cartService.totals())==null?null:a.total)," "),g(2),vt(e.location.path()!=="/checkout"?30:-1),g(6),k("ngIf",(d=e.cartService.cart())==null?null:d.coupon),g(4),k("disabled",!!((v=e.cartService.cart())!=null&&v.coupon)),yt("ngModel",e.code),g(),k("disabled",!!((_=e.cartService.cart())!=null&&_.coupon))}},dependencies:[Mt,Rt,Vt,kt,zt,xt,Dt,jt,Pt,Nt,Lt,Ut,Ot,Ft,ee]})};export{x as a,ee as b,bn as c,B as d,ne as e};
