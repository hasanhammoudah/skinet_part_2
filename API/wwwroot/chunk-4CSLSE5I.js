import{B as E,D as z,E as I,F as w,H as R,J as f,K as D,L as H,O as T,Q as G,S as K,s as _,u as v,w as $,x as d,y as M}from"./chunk-URLX4URI.js";import{a as F}from"./chunk-FL5LPLQ3.js";import{j as S,ja as N,k as J,m as h}from"./chunk-FP3WKUEP.js";import"./chunk-6XXA7HXI.js";import{Cb as g,Db as P,Fb as U,Gb as j,Hb as i,Ib as r,Jb as s,Ob as C,Qb as x,Tb as q,Vc as O,ac as m,bc as y,cb as a,cc as k,db as B,ic as u,ja as l,na as c,tb as b,xb as p}from"./chunk-F7J6KFMZ.js";var L=class e{fb=l(R);accountService=l(S);router=l(h);isVisible=!1;activatedRoute=l(J);returnUrl="/shop";constructor(){let o=this.activatedRoute.snapshot.queryParams.returnUrl;o&&(this.returnUrl=o)}loginForm=this.fb.group({email:[""],password:[""]});onSubmit(){this.accountService.login(this.loginForm.value).subscribe({next:()=>{this.accountService.getUserInfo().subscribe(),this.router.navigateByUrl(this.returnUrl)}})}static \u0275fac=function(t){return new(t||e)};static \u0275cmp=c({type:e,selectors:[["app-login"]],standalone:!0,features:[u],decls:15,vars:1,consts:[[1,"max-w-lg","mx-auto","mt-32","p-8","bg-white"],[3,"ngSubmit","formGroup"],[1,"text-center","mb-6"],[1,"text-3xl","font-semibold","text-primary"],["appearance","outline",1,"w-full","mb-4"],["formControlName","email","type","text","color","primary","placeholder","email@example.com","matInput",""],["formControlName","password","type","password","color","accent","placeholder","Password","matInput",""],["mat-flat-button","","type","submit","color","accent",1,"w-full","py-2"]],template:function(t,n){t&1&&(i(0,"mat-card",0)(1,"form",1),C("ngSubmit",function(){return n.onSubmit()}),i(2,"div",2)(3,"h1",3),m(4," Login "),r(),i(5,"mat-form-field",4)(6,"mat-label"),m(7,"Email address"),r(),s(8,"input",5),r(),i(9,"mat-form-field",4)(10,"mat-label"),m(11,"Password"),r(),s(12,"input",6),r(),i(13,"button",7),m(14," Sign in "),r()()()()),t&2&&(a(),p("formGroup",n.loginForm))},dependencies:[f,E,_,d,M,I,w,F,T,G,D,N,O],styles:[".hidden[_ngcontent-%COMP%]{opacity:0;visibility:hidden;transition:opacity .3s ease-in-out}.visible[_ngcontent-%COMP%]{opacity:1;visibility:visible}"]})};function Z(e,o){if(e&1&&(i(0,"mat-error"),m(1),r()),e&2){let t=x();a(),k("",t.label," is required")}}function tt(e,o){e&1&&(i(0,"mat-error"),m(1,"Email is invalid"),r())}var V=class e{constructor(o){this.controlDir=o;this.controlDir.valueAccessor=this}label="";type="text";writeValue(o){}registerOnChange(o){}registerOnTouched(o){}get control(){return this.controlDir.control}static \u0275fac=function(t){return new(t||e)(B($,2))};static \u0275cmp=c({type:e,selectors:[["app-text-input"]],inputs:{label:"label",type:"type"},standalone:!0,features:[u],decls:6,vars:6,consts:[["appearance","outline",1,"w-full","mb-4"],["color","primary","matInput","",3,"formControl","type","placeholder"]],template:function(t,n){t&1&&(i(0,"mat-form-field",0)(1,"mat-label"),m(2),r(),s(3,"input",1),b(4,Z,2,1,"mat-error")(5,tt,2,0,"mat-error"),r()),t&2&&(a(2),y(n.label),a(),q("type",n.type),q("placeholder",n.label),p("formControl",n.control),a(),g(n.control.hasError("required")?4:-1),a(),g(n.control.hasError("email")?5:-1))},dependencies:[f,_,d,z,T,G,H,D]})};function et(e,o){if(e&1&&(i(0,"li"),m(1),r()),e&2){let t=o.$implicit;a(),y(t)}}function ot(e,o){if(e&1&&(i(0,"div",8)(1,"ul",10),U(2,et,2,1,"li",null,P),r()()),e&2){let t=x();a(2),j(t.validationErrors)}}var A=class e{fb=l(R);accountService=l(S);router=l(h);snack=l(K);validationErrors;registerForm=this.fb.group({firstName:["",v.required],lastName:["",v.required],email:["",v.required],password:["",v.required]});onSubmit(){this.accountService.register(this.registerForm.value).subscribe({next:()=>{this.snack.success("Registration successful - you can now login"),this.router.navigateByUrl("/account/login")},error:o=>this.validationErrors=o})}static \u0275fac=function(t){return new(t||e)};static \u0275cmp=c({type:e,selectors:[["app-register"]],standalone:!0,features:[u],decls:12,vars:3,consts:[[1,"max-w-lg","mx-auto","mt-32","p-8","bg-white"],[3,"ngSubmit","formGroup"],[1,"text-center","mb-6"],[1,"text-3xl","font-semibold","text-primary"],["label","First Name","formControlName","firstName"],["label","Last Name","formControlName","lastName"],["label","Email address","formControlName","email"],["label","Password","formControlName","password","type","password"],[1,"mb-3","p-4","bg-red-100","text-red-600"],["mat-flat-button","","type","submit","color","accent",1,"w-full","py-2",3,"disabled"],[1,"list-disc","px-3"]],template:function(t,n){t&1&&(i(0,"mat-card",0)(1,"form",1),C("ngSubmit",function(){return n.onSubmit()}),i(2,"div",2)(3,"h1",3),m(4," Register "),r(),s(5,"app-text-input",4)(6,"app-text-input",5)(7,"app-text-input",6)(8,"app-text-input",7),b(9,ot,4,0,"div",8),i(10,"button",9),m(11," Register "),r()()()()),t&2&&(a(),p("formGroup",n.registerForm),a(8),g(n.validationErrors?9:-1),a(),p("disabled",n.registerForm.invalid))},dependencies:[f,E,d,M,I,w,F,N,V]})};var Gt=[{path:"login",component:L},{path:"register",component:A}];export{Gt as accountRoutes};
